<template>
  <div class="order">
    <OrderHeader />
    <div class="order-container">
      <div class="order-left">
        <div class="order-about">
          <div style="background-image: url('/movies/1-small.png')" class="order-film-image">
          </div>
          <div class="order-film-about">
            <h4>В очікуванні варварів</h4>
            <ul class="order-film-items">
              <li class="order-film-item">
                <svg class="order-film-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                     viewBox="0 0 24 24">
                  <path class="a" d="M0,0H24V24H0Z"/>
                  <path
                    class="b"
                    d="M12,2A7,7,0,0,0,5,9c0,5.25,7,13,7,13s7-7.75,7-13A7,7,0,0,0,12,2ZM7,9A5,5,0,0,1,17,9c0,2.88-2.88,7.19-5,9.88C9.92,16.21,7,11.85,7,9Z"
                  />
                  <circle class="b" cx="2.5" cy="2.5" r="2.5" transform="translate(9.5 6.5)"/>
                </svg>
                <span class="order-film-text">Київ, ТРЦ Аладдин / Зал №2</span>
              </li>
              <li class="order-film-item">
                <svg class="order-film-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                     viewBox="0 0 24 24">
                  <path class="a" d="M0,0H24V24H0Z"/>
                  <path class="b"
                        d="M-4519-2387a2.006,2.006,0,0,1-2-2v-16a2.005,2.005,0,0,1,2-2h1v-2h2v2h4v-2h2v2h4v-2h2v2h1a2,2,0,0,1,2,2v16a2.005,2.005,0,0,1-2,2Zm0-2h16v-16h-1v1.983h-2V-2405h-4v2h-2v-2h-4v1.983h-2V-2405h-1Z"
                        transform="translate(4523 2410)"/>
                  <path class="b"
                        d="M-4.741-5.405h.878q1.044,0,1.044-.989a.84.84,0,0,0-.249-.628.961.961,0,0,0-.7-.243,1.031,1.031,0,0,0-.643.208.629.629,0,0,0-.273.518H-6.547a1.8,1.8,0,0,1,.354-1.1,2.323,2.323,0,0,1,.98-.751,3.449,3.449,0,0,1,1.378-.27,3.372,3.372,0,0,1,2.11.593,1.947,1.947,0,0,1,.768,1.63,1.607,1.607,0,0,1-.318.949,2.25,2.25,0,0,1-.925.724,2.163,2.163,0,0,1,1.005.681A1.755,1.755,0,0,1-.83-2.947,1.985,1.985,0,0,1-1.658-1.28a3.52,3.52,0,0,1-2.176.625A3.67,3.67,0,0,1-5.3-.946a2.283,2.283,0,0,1-1.025-.807,2.048,2.048,0,0,1-.348-1.173H-4.8a.8.8,0,0,0,.3.62,1.074,1.074,0,0,0,.735.262,1.126,1.126,0,0,0,.784-.265.87.87,0,0,0,.293-.676A1.015,1.015,0,0,0-3-3.818a1.3,1.3,0,0,0-.84-.246h-.906ZM3.326-.761H1.459V-6.394l-1.834.518V-7.361l3.53-1.181h.171Z"
                        transform="translate(13.674 18.654)"/>
                </svg>
                <span class="order-film-text">Сьогодні, 17 серпня / 13:20 - 15:04</span>
              </li>
              <li class="order-film-item">
                <svg class="order-film-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                     viewBox="0 0 24 24">
                  <path class="a" d="M0,0H24V24H0Z"/>
                  <path class="b"
                        d="M658.52,451.97c-.33-.35-3.69-3.67-4.67-4.66s-1.58-.43-1.73-.34l-2.43,1.4a1.014,1.014,0,0,0-.38,1.37,1,1,0,0,0,.89.5c.39.07,2.05-1.03,2.22-1.13s.2-.16.47.06,1.89,1.89,1.89,1.89a.405.405,0,0,1-.02.56.421.421,0,0,1-.26.1H641.16a.427.427,0,0,1-.27-.1.4.4,0,0,1-.01-.56s1.62-1.67,1.89-1.89.3-.16.47-.06,1.82,1.2,2.22,1.13a1,1,0,0,0,.51-1.87l-2.43-1.4c-.16-.09-.75-.64-1.73.34s-4.35,4.31-4.67,4.66a.9.9,0,0,0-.31.75l1,7.01a1,1,0,0,0,.94,1l5.97.01a.531.531,0,0,0,.25-.12c.62-.64,2.22-2.24,2.84-2.85l2.84,2.84a.37.37,0,0,0,.24.12h5.98a1.006,1.006,0,0,0,.94-1l1-7.01A.968.968,0,0,0,658.52,451.97Zm-2.63,6.45a.394.394,0,0,1-.38.31h-4.18a.369.369,0,0,1-.27-.11l-2.64-2.64a.834.834,0,0,0-.59-.25.8.8,0,0,0-.59.25l-2.64,2.64a.4.4,0,0,1-.27.11h-4.18a.378.378,0,0,1-.38-.31l-.85-4.23a.381.381,0,0,1,.31-.45c.01-.02,4.31-.02,8.6-.02s8.59,0,8.6.02a.4.4,0,0,1,.31.45Z"
                        transform="translate(-635.828 -441.735)"/>
                </svg>
                <span class="order-film-text">2D </span>
              </li>
            </ul>
          </div>
        </div>
        <div class="cinema-wrapper">
          <nuxt/>
        </div>
      </div>
      <div class="order-cart">
        <h6 v-if="!cart.length" class="order-cart-header">Замовлення</h6>
        <p v-if="!cart.length" class="order-cart-desc">Будь ласка, оберіть хоча б одне місце на схемі залу, щоб
          продовжити</p>
        <h2 v-if="cart.length" class="order-tickets-header">Квитки</h2>
        <div v-if="cart.length" class="order-tickets-container">

          <ul class="order-tickets">
            <li v-for="ticket in cart" class="order-ticket">
              <button class="order-ticket-remove" @click="handleRemoveTicket(ticket.rowId, ticket.seatId)">

                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24">
                  <path class="a"
                        d="M19,6.41,17.59,5,12,10.59,6.41,5,5,6.41,10.59,12,5,17.59,6.41,19,12,13.41,17.59,19,19,17.59,13.41,12Z"/>
                  <path class="b" d="M0,0H24V24H0Z"/>
                </svg>
              </button>
              <h6 class="order-ticket-row">{{ ticket.seatRow }} <small>ряд</small></h6>
              <div class="order-ticket-about">
                <div class="order-ticket-place">{{ ticket.seatPlace }} <small>Місце</small> <span
                  :class="[ticket.seatType]">{{ ticket.seatType }}</span></div>
                <div class="order-ticket-price">{{ ticket.price }} <small>грн</small></div>
              </div>
            </li>
          </ul>
        </div>


        <div v-if="cart.length" class="order-total">
          <h5 class="order-total-header">Всього до сплати:</h5>
          <div class="order-total-row">
            <p>Квитки: {{ cart.length }}</p>
            <h4><b>{{ cartTotal }}</b> грн</h4>
          </div>

          <div class="order-buy">
            <button class="button">Ввійти, щоб отримати знижку</button>
            <p>Купити без входу в систему за <b>80</b> грн</p>
          </div>

        </div>
      </div>
    </div>
  </div>
</template>

<script>
import OrderHeader from "@/components/OrderHeader";

export default {
  name: "order",
  data: () => ({

    // breadcrumbs: [
    //   { title: 'Місця', active: true },
    //   { title: 'Підтвердження', active: false },
    //   { title: 'Оплата', active: false },
    // ]

  }),
  components: {OrderHeader},
  computed: {
    cartTotal() {
      return this.$store.getters['cart/total'];
    },

    cart() {
      return this.$store.getters['cart/cart'];
    }
  },
  methods: {
    handleRemoveTicket(rowId, seatId) {
      this.$store.commit('cart/removeItem', {
        rowId,
        seatId,
      });
      this.$store.commit('cart/calculateTotal');
    },
  }
}
</script>
